---
title: Glass Combobox
description: Searchable dropdown component with Apple-inspired liquid glass effects and advanced filtering capabilities.
---

```tsx live
import { useState } from "react";
import { GlassCombobox } from "@liquidify/components";
import { User, MapPin, Star, Package, Search, Code } from "lucide-react";

export default function Demo() {
  const [selectedUser, setSelectedUser] = useState("");
  const [selectedLocation, setSelectedLocation] = useState("");

  const users = [
    {
      value: "john",
      label: "John Doe",
      description: "Software Engineer",
      icon: <User className="h-4 w-4" />,
    },
    {
      value: "jane",
      label: "Jane Smith",
      description: "Product Manager",
      icon: <User className="h-4 w-4" />,
    },
    {
      value: "bob",
      label: "Bob Johnson",
      description: "UX Designer",
      icon: <User className="h-4 w-4" />,
    },
    {
      value: "alice",
      label: "Alice Brown",
      description: "Data Scientist",
      icon: <User className="h-4 w-4" />,
    },
  ];

  const locations = [
    {
      value: "ny",
      label: "New York",
      description: "United States",
      icon: <MapPin className="h-4 w-4" />,
    },
    {
      value: "london",
      label: "London",
      description: "United Kingdom",
      icon: <MapPin className="h-4 w-4" />,
    },
    {
      value: "tokyo",
      label: "Tokyo",
      description: "Japan",
      icon: <MapPin className="h-4 w-4" />,
    },
    {
      value: "paris",
      label: "Paris",
      description: "France",
      icon: <MapPin className="h-4 w-4" />,
    },
  ];

  return (
    <div className="space-y-6 max-w-md mx-auto">
      <div>
        <label className="block text-sm font-medium text-white mb-2">
          Select User
        </label>
        <GlassCombobox
          options={users}
          value={selectedUser}
          onChange={setSelectedUser}
          placeholder="Search users..."
          searchable
          clearable
        />
      </div>

      <div>
        <label className="block text-sm font-medium text-white mb-2">
          Select Location
        </label>
        <GlassCombobox
          options={locations}
          value={selectedLocation}
          onChange={setSelectedLocation}
          placeholder="Choose location..."
          searchable={false}
          size="lg"
        />
      </div>

      <div className="p-4 rounded-lg bg-white/5 border border-white/10">
        <h3 className="font-medium text-white mb-2">Selected Values:</h3>
        <p className="text-white/70 text-sm">
          User: {selectedUser || "None"}
          <br />
          Location: {selectedLocation || "None"}
        </p>
      </div>
    </div>
  );
}
```

## Overview

The Glass Combobox component combines the functionality of a dropdown and search input, allowing users to either select from a list of options or search through them. It features Apple-inspired liquid glass effects and smooth animations.

## Props

| Prop                | Type                      | Default                 | Description                        |
| ------------------- | ------------------------- | ----------------------- | ---------------------------------- |
| `options`           | `ComboboxOption[]`        | `[]`                    | Array of selectable options        |
| `value`             | `string`                  | `''`                    | Current selected value             |
| `onChange`          | `(value: string) => void` | -                       | Callback when selection changes    |
| `onInputChange`     | `(value: string) => void` | -                       | Callback when search input changes |
| `placeholder`       | `string`                  | `'Select an option...'` | Placeholder text                   |
| `searchable`        | `boolean`                 | `true`                  | Enable search functionality        |
| `clearable`         | `boolean`                 | `false`                 | Show clear button                  |
| `loading`           | `boolean`                 | `false`                 | Show loading state                 |
| `size`              | `'sm' \| 'md' \| 'lg'`    | `'md'`                  | Size variant                       |
| `error`             | `boolean`                 | `false`                 | Error state                        |
| `helperText`        | `string`                  | -                       | Helper text below input            |
| `emptyMessage`      | `string`                  | `'No options found'`    | Message when no options match      |
| `maxDisplayOptions` | `number`                  | `50`                    | Maximum options to display         |
| `disabled`          | `boolean`                 | `false`                 | Disabled state                     |

### ComboboxOption Interface

```typescript
interface ComboboxOption {
  value: string;
  label: string;
  description?: string;
  icon?: React.ReactNode;
  disabled?: boolean;
}
```

## Usage Patterns

### Basic Combobox

```tsx
const options = [
  { value: 'apple', label: 'Apple' },
  { value: 'banana', label: 'Banana' },
  { value: 'orange', label: 'Orange' }
]

<GlassCombobox
  options={options}
  value={selectedFruit}
  onChange={setSelectedFruit}
  placeholder="Select a fruit..."
/>
```

### With Icons and Descriptions

```tsx
const frameworks = [
  {
    value: 'react',
    label: 'React',
    description: 'A JavaScript library for building user interfaces',
    icon: <Code className="h-4 w-4" />
  },
  {
    value: 'vue',
    label: 'Vue.js',
    description: 'The Progressive JavaScript Framework',
    icon: <Code className="h-4 w-4" />
  }
]

<GlassCombobox
  options={frameworks}
  value={selectedFramework}
  onChange={setSelectedFramework}
  placeholder="Choose framework..."
/>
```

### Non-Searchable Dropdown

```tsx
<GlassCombobox
  options={countries}
  value={selectedCountry}
  onChange={setSelectedCountry}
  searchable={false}
  placeholder="Select country..."
/>
```

### With Async Data Loading

```tsx
const [options, setOptions] = useState([])
const [loading, setLoading] = useState(false)
const [searchTerm, setSearchTerm] = useState('')

useEffect(() => {
  const fetchOptions = async () => {
    if (searchTerm.length < 2) return

    setLoading(true)
    try {
      const results = await searchAPI(searchTerm)
      setOptions(results)
    } finally {
      setLoading(false)
    }
  }

  const debounced = setTimeout(fetchOptions, 300)
  return () => clearTimeout(debounced)
}, [searchTerm])

<GlassCombobox
  options={options}
  value={selectedItem}
  onChange={setSelectedItem}
  onInputChange={setSearchTerm}
  loading={loading}
  placeholder="Search items..."
/>
```

### Form Integration

```tsx
const [formData, setFormData] = useState({
  category: '',
  priority: '',
  assignee: ''
})

<form className="space-y-4">
  <GlassCombobox
    options={categories}
    value={formData.category}
    onChange={(value) => setFormData(prev => ({ ...prev, category: value }))}
    placeholder="Select category..."
    error={!!errors.category}
    helperText={errors.category}
  />

  <GlassCombobox
    options={priorities}
    value={formData.priority}
    onChange={(value) => setFormData(prev => ({ ...prev, priority: value }))}
    placeholder="Set priority..."
    size="sm"
  />
</form>
```

## Accessibility

### WCAG Compliance

- **Keyboard Navigation**: Full keyboard support with arrow keys, Enter, and Escape
- **Screen Readers**: Proper ARIA labels, roles, and live regions
- **Focus Management**: Maintains focus within component during interaction
- **High Contrast**: Supports system color preferences

### Implementation Details

- Uses `role="combobox"` with proper ARIA attributes
- Search input has `aria-autocomplete="list"`
- Options list uses `role="listbox"` with `role="option"` items
- Active option is indicated with `aria-activedescendant`
- Expanded state is communicated via `aria-expanded`

### Keyboard Support

| Key          | Action                                     |
| ------------ | ------------------------------------------ |
| `Arrow Down` | Navigate to next option or open dropdown   |
| `Arrow Up`   | Navigate to previous option                |
| `Enter`      | Select highlighted option or open dropdown |
| `Escape`     | Close dropdown and clear highlight         |
| `Tab`        | Close dropdown and move to next element    |
| `Type`       | Search for options (when searchable)       |

## Apple HIG Guidelines

### Visual Design

- **Liquid Glass Effects**: Multi-layered transparency with backdrop blur
- **Smooth Animations**: Spring-based animations for dropdown appearance
- **Typography**: SF Pro font family with appropriate weights
- **Iconography**: Consistent icon style and sizing

### Interaction Patterns

- **Predictable Behavior**: Follows standard combobox interaction patterns
- **Immediate Feedback**: Visual feedback for all user actions
- **Error Prevention**: Clear validation and error messaging
- **Efficient Input**: Smart defaults and autocomplete functionality

### Layout and Spacing

- **Touch Targets**: Minimum 44px touch targets on mobile
- **Consistent Spacing**: Uses 8pt grid system
- **Responsive Design**: Adapts to different screen sizes
- **Safe Areas**: Respects device safe areas and notches

### Animation Guidelines

- **Entrance**: Dropdown appears with scale and fade animation
- **Exit**: Smooth transition when closing
- **Hover States**: Subtle feedback for interactive elements
- **Loading States**: Elegant loading indicators

## Best Practices

### Performance

- Use `React.memo` for option components that don't change
- Implement virtualization for very large option lists
- Debounce search input to reduce API calls
- Optimize filtering algorithms for large datasets

```tsx
// Memoized option component
const ComboboxOption = React.memo(({ option, isSelected, isHighlighted }) => {
  return (
    <div
      className={cn(
        "flex items-center gap-3 px-4 py-3",
        isSelected && "bg-blue-500/20",
        isHighlighted && "bg-white/10",
      )}
    >
      {option.icon}
      <div>
        <div className="font-medium">{option.label}</div>
        {option.description && (
          <div className="text-sm text-white/60">{option.description}</div>
        )}
      </div>
    </div>
  );
});
```

### UX Guidelines

- Provide clear placeholder text that describes the expected input
- Use appropriate option grouping for large datasets
- Include helpful descriptions for complex options
- Implement smart search that handles typos and partial matches

### Error Handling

```tsx
const [error, setError] = useState("");

const handleChange = (value) => {
  setError("");

  if (required && !value) {
    setError("This field is required");
    return;
  }

  if (customValidation && !customValidation(value)) {
    setError("Please select a valid option");
    return;
  }

  onChange(value);
};

<GlassCombobox
  options={options}
  value={value}
  onChange={handleChange}
  error={!!error}
  helperText={error}
/>;
```

### Search Optimization

```tsx
// Fuzzy search implementation
const fuzzySearch = (options, searchTerm) => {
  const fuse = new Fuse(options, {
    keys: ["label", "description"],
    threshold: 0.3,
    includeScore: true,
  });

  return fuse.search(searchTerm).map((result) => result.item);
};

// Debounced search
const useDebounce = (value, delay) => {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => clearTimeout(handler);
  }, [value, delay]);

  return debouncedValue;
};
```

### Mobile Considerations

- Use native select on mobile when appropriate
- Ensure dropdown doesn't get cut off by viewport
- Support touch gestures for scrolling through options
- Consider using bottom sheet pattern for mobile

```tsx
const isMobile = useMediaQuery("(max-width: 768px)");

if (isMobile) {
  return <NativeSelect options={options} value={value} onChange={onChange} />;
}

return <GlassCombobox options={options} value={value} onChange={onChange} />;
```
