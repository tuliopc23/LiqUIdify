<!doctype html>
<html>
  <head>
    <title>Bundle Analysis - LiqUIdify</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        margin: 0;
        padding: 20px;
        background: #f5f5f5;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      h1 {
        margin-top: 0;
        color: #333;
      }
      .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }
      .stat {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 4px;
        text-align: center;
      }
      .stat-value {
        font-size: 24px;
        font-weight: bold;
        color: #2563eb;
      }
      .stat-label {
        font-size: 14px;
        color: #666;
        margin-top: 5px;
      }
      #treemap {
        width: 100%;
        height: 600px;
        border: 1px solid #ddd;
        border-radius: 4px;
      }
      .tooltip {
        position: absolute;
        text-align: center;
        padding: 8px;
        font-size: 12px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        border-radius: 4px;
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.2s;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Bundle Analysis Report</h1>

      <div class="stats">
        <div class="stat">
          <div class="stat-value">784.50 KB</div>
          <div class="stat-label">Total Size</div>
        </div>
        <div class="stat">
          <div class="stat-value">185.56 KB</div>
          <div class="stat-label">Gzipped Size</div>
        </div>
        <div class="stat">
          <div class="stat-value">5.4%</div>
          <div class="stat-label">Avg Compression</div>
        </div>
        <div class="stat">
          <div class="stat-value">0</div>
          <div class="stat-label">Size Violations</div>
        </div>
      </div>

      <h2>Bundle Treemap</h2>
      <div id="treemap"></div>

      <div class="tooltip"></div>
    </div>

    <script>
      const data = {
        name: "liquidify",
        children: [
          {
            name: "root",
            children: [
              {
                name: "variant-system-D_EnIrp-.js",
                value: 258498,
                gzipValue: 61099,
              },
              { name: "utils-hmM_wTjF.js", value: 96285, gzipValue: 16089 },
              { name: "index-CTGwSpMD.js", value: 94998, gzipValue: 24277 },
              {
                name: "glass-dropdown-DSkgQwcZ.js",
                value: 77643,
                gzipValue: 18117,
              },
              { name: "hooks-DvzsrVz2.js", value: 52007, gzipValue: 12580 },
              {
                name: "glass-file-upload-oz-t2jVy.js",
                value: 40895,
                gzipValue: 8386,
              },
              {
                name: "glass-command-ljGBE_wL.js",
                value: 37794,
                gzipValue: 8075,
              },
              {
                name: "accessibility-manager-DU7QdoM4.js",
                value: 24221,
                gzipValue: 5760,
              },
              {
                name: "glass-skeleton-CvcnePa5.js",
                value: 13449,
                gzipValue: 3430,
              },
              { name: "index-CaOGcAJS.js", value: 11924, gzipValue: 3213 },
              {
                name: "glass-chart-B6IR7Urf.js",
                value: 11559,
                gzipValue: 2856,
              },
              {
                name: "glass-focus-trap-CGT9fRoS.js",
                value: 10304,
                gzipValue: 2375,
              },
              {
                name: "glass-live-region-C-Syoymi.js",
                value: 9389,
                gzipValue: 2487,
              },
              {
                name: "glass-skip-navigation-CP0EKWz4.js",
                value: 7997,
                gzipValue: 2441,
              },
              { name: "index-C2PEZb3y.js", value: 7263, gzipValue: 2246 },
              {
                name: "glass-error-boundary-ClyY0EDN.js",
                value: 7133,
                gzipValue: 2143,
              },
              {
                name: "glass-spinner-Dd8NFknb.js",
                value: 6976,
                gzipValue: 1855,
              },
              { name: "index-BmdDcjjM.js", value: 5743, gzipValue: 1670 },
              {
                name: "glass-slider-goqtu8FY.js",
                value: 4823,
                gzipValue: 1430,
              },
              { name: "index-BJL0kKeu.js", value: 4418, gzipValue: 1337 },
              { name: "glass-toast-C40XjLSK.js", value: 4346, gzipValue: 1518 },
              {
                name: "theme-toggle-vSW0jY7B.js",
                value: 4319,
                gzipValue: 1429,
              },
              {
                name: "glass-progress-Bi4ELaOh.js",
                value: 3054,
                gzipValue: 1018,
              },
              {
                name: "glass-visually-hidden-BdfmxJWs.js",
                value: 1215,
                gzipValue: 558,
              },
              { name: "glass-table-DIdhnuyN.js", value: 1215, gzipValue: 503 },
              {
                name: "createLucideIcon-BiX-3dSs.js",
                value: 1201,
                gzipValue: 598,
              },
              {
                name: "glass-ui-provider-C3tbvA0j.js",
                value: 930,
                gzipValue: 405,
              },
              { name: "file-text-BK7gXHS3.js", value: 839, gzipValue: 389 },
              { name: "info-Bpg8SA2o.js", value: 779, gzipValue: 345 },
              { name: "file-BrAbxs0W.js", value: 738, gzipValue: 369 },
              {
                name: "alert-triangle-CZAPF8Vr.js",
                value: 398,
                gzipValue: 256,
              },
              { name: "user-DoPrI8jh.js", value: 278, gzipValue: 208 },
              { name: "search-CrxGLAXQ.js", value: 258, gzipValue: 194 },
              { name: "x-DYyrg8Sw.js", value: 221, gzipValue: 172 },
              { name: "chevron-right-bh_CcsH-.js", value: 214, gzipValue: 169 },
              { name: "core-glass-l0sNRNKZ.js", value: 1, gzipValue: 21 },
            ],
          },
        ],
      };

      const width = document.getElementById("treemap").clientWidth;
      const height = 600;

      const color = d3
        .scaleOrdinal()
        .domain(["bundles", "components", "core", "styles", "root"])
        .range(["#3b82f6", "#10b981", "#f59e0b", "#ef4444", "#8b5cf6"]);

      const treemap = d3.treemap().size([width, height]).padding(2);

      const root = d3
        .hierarchy(data)
        .sum((d) => d.value)
        .sort((a, b) => b.value - a.value);

      treemap(root);

      const svg = d3
        .select("#treemap")
        .append("svg")
        .attr("width", width)
        .attr("height", height);

      const tooltip = d3.select(".tooltip");

      const leaf = svg
        .selectAll("g")
        .data(root.leaves())
        .join("g")
        .attr("transform", (d) => `translate(${d.x0},${d.y0})`);

      leaf
        .append("rect")
        .attr("fill", (d) => color(d.parent.data.name))
        .attr("width", (d) => d.x1 - d.x0)
        .attr("height", (d) => d.y1 - d.y0)
        .on("mouseover", (event, d) => {
          tooltip.transition().duration(200).style("opacity", 0.9);
          tooltip
            .html(
              `<strong>${d.data.name}</strong><br/>Size: ${formatBytes(d.data.value)}<br/>Gzip: ${formatBytes(d.data.gzipValue)}`,
            )
            .style("left", event.pageX + 10 + "px")
            .style("top", event.pageY - 28 + "px");
        })
        .on("mouseout", () => {
          tooltip.transition().duration(500).style("opacity", 0);
        });

      leaf
        .append("text")
        .attr("x", 4)
        .attr("y", 20)
        .text((d) => {
          const width = d.x1 - d.x0;
          const name = d.data.name.split("/").pop();
          return width > 50 ? name : "";
        })
        .attr("font-size", "11px")
        .attr("fill", "white");

      function formatBytes(bytes) {
        const sizes = ["B", "KB", "MB"];
        if (bytes === 0) return "0 B";
        const i = Math.floor(Math.log(bytes) / Math.log(1024));
        return (bytes / Math.pow(1024, i)).toFixed(2) + " " + sizes[i];
      }
    </script>
  </body>
</html>
